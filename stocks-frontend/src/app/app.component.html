<div class="layout">
  <header>
    <h1>{{ title }}</h1>
    <p>Demo Angular + Spring Boot + CockroachDB</p>
  </header>

  <section class="card">
    <ng-container *ngIf="isLoading; else loaded">
      <p>Cargando acciones...</p>
    </ng-container>
    <ng-template #loaded>
      <div *ngIf="errorMessage; else table">
        <p class="error">{{ errorMessage }}</p>
      </div>
      <ng-template #table>
        <table>
          <thead>
          <tr>
            <th>Símbolo</th>
            <th>Nombre</th>
            <th>Precio</th>
            <th>Última actualización</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let stock of stocks">
            <td>{{ stock.symbol }}</td>
            <td>{{ stock.name }}</td>
            <td>{{ stock.price | number:'1.2-2' }}</td>
            <td>{{ stock.lastUpdated | date:'short' }}</td>
          </tr>
          </tbody>
        </table>
        <p *ngIf="stocks.length === 0" class="empty">No hay datos aún. Crea nuevas acciones usando el endpoint POST /api/stocks.</p>
      </ng-template>
    </ng-template>
  </section>
</div>
